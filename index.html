<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Negociaci√≥n - Recobro Pro</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="main-container">
    
    <header class="info-panel">
        <div class="info-title"><i class="fas fa-info-circle"></i> Referencia de Fases y Tasas</div>
        <div class="rates-grid">
            <div class="rate-card special"><strong>SOFT (1-17 d√≠as)</strong><br>Gesti√≥n temprana.<br>Prioridad: Pr√≥rroga / Pago Total.</div>
            <div class="rate-card optimo"><strong>SOFT+ (18-45 d√≠as)</strong><br>Gesti√≥n Lealtad.<br>Prioridad: Reestructuraci√≥n / Quita.</div>
            <div class="rate-card rentable"><strong>HARD (+46 d√≠as)</strong><br>Gesti√≥n Intensiva.<br>Prioridad: Recupero M√≠nimo.</div>
        </div>
    </header>

    <section class="control-panel">
        <div class="input-group">
            <label>Tipo de Cr√©dito</label>
            <select id="tipoCredito" onchange="actualizarTasas()">
                <option value="ESPECIAL">Especial</option>
                <option value="OPTIMO">√ìptimo</option>
                <option value="RENTABLE">Rentable</option>
                <option value="LIBRE">Libre</option>
            </select>
        </div>
        <div class="input-group">
            <label>üí∞ Deuda Total</label>
            <input type="number" id="inDeuda" placeholder="0.00" oninput="calcular()">
        </div>
        <div class="input-group">
            <label>üè¶ Cuerpo</label>
            <input type="number" id="inCuerpo" placeholder="0.00" oninput="calcular()">
        </div>
        <div class="input-group">
            <label>üìÖ D√≠as Atraso</label>
            <input type="number" id="inDias" placeholder="0" oninput="calcular()">
        </div>
        
        <div style="display:flex; align-items:center; justify-content:center;">
            <label class="manual-mode-switch">
                <input type="checkbox" id="forceMode" onchange="actualizarUI()"> 
                <span>üîì Modo Manual</span>
            </label>
        </div>

        <div id="phaseDisplay" class="phase-badge">ESPERANDO DATOS...</div>
    </section>

    <div class="strategies-grid">

        <div class="card" id="cardRefin">
            <div class="card-header"><i class="fas fa-sync-alt"></i> A. Refinanciaci√≥n</div>
            <div class="card-body">
                <p class="status-text">Nuevo cr√©dito para pagar el actual.</p>
                <div class="promo-box">
                    <strong>Promo Sugerida:</strong>
                    <div id="promoCodeDisplay" class="highlight-text">--</div>
                </div>
            </div>
        </div>

        <div class="card" id="cardProrroga">
            <div class="card-header"><i class="fas fa-history"></i> B. Pr√≥rroga</div>
            <div class="card-body">
                <p class="status-text">Extensi√≥n de plazo (Congela mora).</p>
                
                <div class="manual-calc-grid">
                    <div class="mini-inputs">
                        <label>D√≠as:</label>
                        <input type="number" id="proDias" value="7" oninput="calcularProrrogaFinal()">
                    </div>
                    <div class="mini-inputs">
                        <label>Vence:</label>
                        <div id="proFechaVenc" style="font-weight:bold; color:#2563eb;">--/--</div>
                    </div>
                </div>

                <div class="manual-calc-grid">
                    <div class="mini-inputs"><label>Monto:</label><input type="number" id="proMontoUser" oninput="calcProFromMonto()"></div>
                    <div class="mini-inputs"><label>%:</label><input type="number" id="proPorc" value="15" oninput="calcProFromPorc()"></div>
                </div>

                <div id="proWarning" class="warning-note" style="display:none;"></div>

                <div class="result-box">
                    <div class="row">Pagar HOY: <strong class="money" id="proPagoHoy">‚Ç¨0.00</strong></div>
                    <div class="row" style="font-size:0.8rem; border-top:1px dashed #ccc; margin-top:5px; padding-top:5px;">
                        Vs Sin Hacer Nada: <span id="proProyeccion" style="color:#dc2626; font-weight:bold;">‚Ç¨0.00</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" id="cardDescuento">
            <div class="card-header"><i class="fas fa-percentage"></i> C. Liquidaci√≥n (Quita)</div>
            <div class="card-body">
                <p class="status-text">Pago √∫nico para cancelar:</p>
                
                <div class="comparison-container">
                    <div class="option-box soft-style">
                        <div class="opt-title">SOFT (1-17d)</div>
                        <div class="calc-row-sm">10%: <strong id="dSoft10">‚Ç¨0.00</strong></div>
                        <div class="calc-row-sm">12%: <strong id="dSoft12">‚Ç¨0.00</strong></div>
                        <div class="calc-row-sm">15%: <strong id="dSoft15" class="highlight-val">‚Ç¨0.00</strong></div>
                    </div>
                    
                    <div class="option-box softplus-style">
                        <div class="opt-title">SOFT+ (18-45d)</div>
                        <div class="calc-row-sm">Negociar (2x): <strong id="dSoftPlusStart">‚Ç¨0.00</strong></div>
                        <div class="calc-row-sm">M√≠nimo (1.4x): <strong id="dSoftPlusMin" class="highlight-val">‚Ç¨0.00</strong></div>
                    </div>

                    <div class="option-box hard-style">
                        <div class="opt-title">HARD (46+d)</div>
                        <div class="calc-row-sm">Negociar (2x): <strong id="dHardStart">‚Ç¨0.00</strong></div>
                        <div class="calc-row-sm">M√≠nimo (1.2x): <strong id="dHardMin" class="highlight-val">‚Ç¨0.00</strong></div>
                    </div>
                </div>
                <div class="ahorro-tag" id="ahorroDisplay">Ahorro M√°x: ‚Ç¨0.00</div>
            </div>
        </div>

        <div class="card" id="cardVacaciones">
            <div class="card-header"><i class="fas fa-umbrella-beach"></i> D. Vacaciones</div>
            <div class="card-body">
                <p class="status-text">Pago a cuenta para frenar gesti√≥n.</p>
                <div class="option-pill-group">
                    <button class="option-pill" onclick="setVacacionesPreset(30, 3)">30%</button>
                    <button class="option-pill" onclick="setVacacionesPreset(40, 5)">40%</button>
                    <button class="option-pill" onclick="setVacacionesPreset(50, 7)">50%</button>
                </div>
                <div class="manual-calc-grid" style="margin-top:10px;">
                    <div class="mini-inputs"><label>Monto:</label><input type="number" id="vacMontoUser" oninput="calcVacacionesFromMonto()"></div>
                    <div class="mini-inputs"><label>%:</label><input type="number" id="vacPorcUser" oninput="calcVacacionesFromPorc()"></div>
                </div>
                <div class="mini-inputs"><label>D√≠as:</label><input type="number" id="vacDiasSelect" value="3" oninput="calcVacacionesFinal()"></div>
                <div id="vacWarning" class="warning-note" style="display:none;"></div>
                <div class="result-box">
                    <div class="row">Pagar HOY: <strong id="vacPago" class="money">‚Ç¨0.00</strong></div>
                    <div class="row">Restante: <strong id="vacRestante">‚Ç¨0.00</strong></div>
                </div>
            </div>
        </div>

        <div class="card" id="cardCuotas">
            <div class="card-header"><i class="fas fa-handshake"></i> E. Plan de Pagos</div>
            <div class="card-body">
                
                <div class="mini-inputs" style="margin-bottom:15px;">
                    <label style="font-weight:bold; color:#4f46e5;">Plan de Fase:</label>
                    <select id="faseCuotasSelector" onchange="calcularCuotas()" style="font-weight:bold; border:2px solid #4f46e5;">
                        <option value="SOFT">SOFT (100% Cuerpo)</option>
                        <option value="SOFT+">SOFT+ (70% Cuerpo)</option>
                        <option value="HARD">HARD (50% Cuerpo)</option>
                    </select>
                </div>

                <div class="split-container">
                    <label class="plan-option" id="planA_box">
                        <input type="radio" name="planType" value="FULL" checked onchange="renderCalendar()">
                        <div class="plan-header">SIN DESCUENTO</div>
                        <div class="plan-detail">Deuda: <span id="valDeudaA">‚Ç¨0</span></div>
                        <div class="plan-detail">Entrada: <strong id="valEntradaA" class="text-blue">‚Ç¨0</strong></div>
                        <div class="plan-detail">Cuotas de: <strong id="valCuotaA">‚Ç¨0</strong></div>
                    </label>

                    <label class="plan-option" id="planB_box">
                        <input type="radio" name="planType" value="DISCOUNT" onchange="renderCalendar()">
                        <div class="plan-header">CON DESCUENTO</div>
                        <div class="plan-detail">Deuda (2x): <span id="valDeudaB">‚Ç¨0</span></div>
                        <div class="plan-detail">Entrada: <strong id="valEntradaB" class="text-green">‚Ç¨0</strong></div>
                        <div class="plan-detail">Cuotas de: <strong id="valCuotaB">‚Ç¨0</strong></div>
                    </label>
                </div>

                <hr style="border-color: #e5e7eb; margin: 15px 0;">

                <div class="manual-calc-grid">
                    <div class="mini-inputs">
                        <label>Frecuencia:</label>
                        <select id="cuotaFreq" onchange="calcularCuotas()">
                            <option value="15" selected>Quincenal (15d)</option>
                            <option value="30">Mensual (30d)</option>
                        </select>
                    </div>
                    <div class="mini-inputs">
                        <label>N¬∫ Cuotas:</label>
                        <input type="number" id="cuotaCant" value="2" min="1" max="12" oninput="calcularCuotas()">
                    </div>
                </div>

                <div id="scheduleTable" class="schedule-list"></div>
            </div>
        </div>

    </div>
</div>
<script src="script.js"></script>
</body>
</html>