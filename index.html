<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Negociaci√≥n - Recobro Pro</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="main-container">
    
    <header class="info-panel">
        <div class="info-title"><i class="fas fa-info-circle"></i> Referencia de Tasas (Diarias)</div>
        <div class="rates-grid">
            <div class="rate-card special">
                <strong>ESPECIAL (Todos - Bajo Riesgo)</strong><br>
                | Monto: 100 - 2000 | Apertura 10% | Int: 1.5% | Uso: 0.3% | Mora: 4%
            </div>
            <div class="rate-card optimo">
                <strong>√ìPTIMO (Nuevos)</strong><br>
                | Monto: 100 - 1500 | Apertura 15% | Int: 1.8% | Uso: 0.3% | Mora: 4%
            </div>
            <div class="rate-card rentable">
                <strong>RENTABLE (Habituales)</strong><br>
                | Monto: 100 - 1500 | Apertura 15% | Int: 1.8% | Uso: 0.3% | Mora: 4%
            </div>
            <div class="rate-card libre">
                <strong>LIBRE (Todos Alto Riesgo)</strong><br>
                | Monto: 100 - 500 | Apertura 15% | Int: 2.5% | Uso: 0.5% | Mora: 4%
            </div>
        </div>
    </header>

    <section class="control-panel">
        <div class="input-group">
            <label>Tipo de Cr√©dito Original</label>
            <select id="tipoCredito" onchange="actualizarTasas()">
                <option value="ESPECIAL">Especial</option>
                <option value="OPTIMO">√ìptimo</option>
                <option value="RENTABLE">Rentable</option>
                <option value="LIBRE">Libre</option>
            </select>
        </div>
        <div class="input-group">
            <label>üí∞ Deuda Total (CRM)</label>
            <input type="number" id="inDeuda" placeholder="0.00" oninput="calcular()">
        </div>
        <div class="input-group">
            <label>üè¶ Cuerpo (Capital)</label>
            <input type="number" id="inCuerpo" placeholder="0.00" oninput="calcular()">
        </div>
        <div class="input-group">
            <label>üìÖ D√≠as de Atraso</label>
            <input type="number" id="inDias" placeholder="0" oninput="calcular()">
        </div>
        
        <div id="phaseDisplay" class="phase-badge">ESPERANDO DATOS...</div>
    </section>

    

    <div class="strategies-grid">

        <div class="card" id="cardRefin">
            <div class="card-header"><i class="fas fa-sync-alt"></i> A. Refinanciaci√≥n (Nuevo Cr√©dito)</div>
            <div class="card-body">
                <p class="status-text">Disponible desde d√≠a 1 (T√©cnicamente -5).</p>
                <div class="promo-box">
                    <strong>C√≥digos Promo Sugeridos:</strong>
                    <div id="promoCodeDisplay" class="highlight-text">--</div>
                </div>
                <p class="script">"Si abona el total hoy, el sistema podr√≠a habilitarle un nuevo cr√©dito inmediatamente con condiciones preferenciales."</p>
            </div>
        </div>

        <div class="card" id="cardProrroga">
            <div class="card-header"><i class="fas fa-history"></i> B. Pr√≥rroga (Extensi√≥n)</div>
            <div class="card-body">
                <p class="status-text">Disponible: D√≠a -3 a 7. (Congela penalizaciones).</p>
                
                <div class="ref-grid">
                    <div class="ref-item low"><span>Hasta 7 d√≠as</span><strong>Min 5%</strong></div>
                    <div class="ref-item med"><span>8 a 10 d√≠as</span><strong>Min 10%</strong></div>
                    <div class="ref-item high"><span>11 a 15 d√≠as</span><strong>Min 15%</strong></div>
                </div>

                <hr style="border-color: #f1f5f9; margin: 10px 0;">

                <div class="manual-calc-grid">
                    <div class="mini-inputs">
                        <label>D√≠as Extra:</label>
                        <input type="number" id="proDias" value="7" oninput="calcularProrrogaFinal()">
                    </div>
                    <div class="mini-inputs">
                        <label>Nueva Fecha:</label>
                        <div id="proFechaVenc" style="background:#f1f5f9; padding:5px; border-radius:4px; border:1px solid #ccc; width:100%; text-align:center; font-weight:bold; color:#2563eb;">
                            --/--/--
                        </div>
                    </div>
                </div>

                <div class="manual-calc-grid">
                    <div class="mini-inputs">
                        <label>Cliente tiene (‚Ç¨):</label>
                        <input type="number" id="proMontoUser" placeholder="0" oninput="calcProFromMonto()">
                    </div>
                    <div class="mini-inputs">
                        <label>Equivale a (%):</label>
                        <input type="number" id="proPorc" value="15" oninput="calcProFromPorc()">
                    </div>
                </div>

                <div id="proWarning" class="warning-note" style="display:none; background: #fffbeb; border: 1px solid #fcd34d; color: #b45309; padding: 8px; font-size: 0.85rem; margin-bottom: 10px;"></div>

                <div class="result-box" style="background: #f0fdf4; border-color: #bbf7d0;">
                    
                    <div class="row">
                        <span>1. Pagar HOY:</span>
                        <strong class="money" id="proPagoHoy">‚Ç¨0.00</strong>
                    </div>

                    <hr style="border-top: 1px dashed #86efac; margin: 8px 0;">

                    <div style="display: grid; grid-template-columns: 1fr 1px 1fr; gap: 10px; text-align: center; align-items: center;">
                        
                        <div>
                            <span style="font-size: 0.75rem; color: #166534; font-weight: bold;">CON PR√ìRROGA</span>
                            <div style="font-size: 0.7rem; color: #6b7280;">(Saldo + 20% Castigo)</div>
                            <div id="proNuevoTotal" style="font-size: 1.1rem; font-weight: bold; color: #166534;">‚Ç¨0.00</div>
                        </div>

                        <div style="background: #bbf7d0; height: 100%; width: 1px;"></div>

                        <div>
                            <span style="font-size: 0.75rem; color: #dc2626; font-weight: bold;">SIN HACER NADA</span>
                            <div style="font-size: 0.7rem; color: #6b7280;">(Proyecci√≥n CRM)</div>
                            <div id="proProyeccion" style="font-size: 1.1rem; font-weight: bold; color: #dc2626;">‚Ç¨0.00</div>
                        </div>

                    </div>
                    
                    <div style="text-align: center; margin-top: 8px; background: white; padding: 4px; border-radius: 4px; border: 1px solid #bbf7d0; font-size: 0.8rem;">
                        üí° Evitas crecer la deuda en: <strong id="proDiferencia" style="color: #059669">‚Ç¨0.00</strong>
                    </div>

                </div>
            </div>
        </div>

        <div class="card" id="cardDescuento">
            <div class="card-header"><i class="fas fa-percentage"></i> C. Descuento / Liquidaci√≥n</div>
            <div class="card-body">
                <p class="status-text">Liquidar deuda hoy.</p>
                
                <div id="descSoft" style="display:none;">
                    <p class="sub-label">Soft (1-15 d√≠as): % sobre Cargos (Total - Cuerpo)</p>
                    <div class="calc-row"><span>10% Dto:</span> <strong id="dSoft10">‚Ç¨0.00</strong> (Paga)</div>
                    <div class="calc-row"><span>12% Dto:</span> <strong id="dSoft12">‚Ç¨0.00</strong> (Paga)</div>
                    <div class="calc-row"><span>15% Dto:</span> <strong id="dSoft15" class="money">‚Ç¨0.00</strong> (Paga)</div>
                    <p class="note">M√°s de 15% requiere Supervisor.</p>
                </div>

                <div id="descHard" style="display:none;">
                    <p class="sub-label">Pol√≠tica Multiplicador de Cuerpo</p>
                    <div class="calc-row"><span>Oferta Inicial (2x):</span> <strong id="dHardStart">‚Ç¨0.00</strong></div>
                    <div class="calc-row"><span>M√≠nimo (<span id="factorLabel">1.4</span>x):</span> <strong id="dHardMin" class="money">‚Ç¨0.00</strong></div>
                    <p class="note" id="descHardNote"></p>
                </div>
                <div class="ahorro-tag" id="ahorroDisplay">Ahorro: ‚Ç¨0.00</div>
            </div>
        </div>

        <div class="card" id="cardVacaciones">
            <div class="card-header"><i class="fas fa-umbrella-beach"></i> D. Vacaciones Financieras</div>
            <div class="card-body">
                <p class="status-text">Disponible desde D√≠a 8 (Congela deuda).</p>
                
                <div class="option-pill-group">
                    <button class="option-pill" onclick="setVacacionesPreset(30, 3)">30% (3d)</button>
                    <button class="option-pill" onclick="setVacacionesPreset(40, 5)">40% (5d)</button>
                    <button class="option-pill" onclick="setVacacionesPreset(50, 7)">50% (7d)</button>
                </div>

                <hr style="border-color: #e5e7eb; margin: 15px 0;">

                <div class="manual-calc-grid">
                    <div class="mini-inputs">
                        <label>Cliente tiene (‚Ç¨):</label>
                        <input type="number" id="vacMontoUser" placeholder="0" oninput="calcVacacionesFromMonto()">
                    </div>
                    <div class="mini-inputs">
                        <label>Equivale a (%):</label>
                        <input type="number" id="vacPorcUser" placeholder="0" oninput="calcVacacionesFromPorc()">
                    </div>
                </div>

                <div class="mini-inputs">
                    <label>D√≠as a Congelar:</label>
                    <input type="number" id="vacDiasSelect" value="3" min="1" max="10" oninput="calcVacacionesFinal()">
                </div>

                <div class="result-box">
                    <div class="row">Pago Inicial HOY: <strong id="vacPago" class="money">‚Ç¨0.00</strong></div>
                    <div class="row">Saldo Restante: <strong id="vacRestante">‚Ç¨0.00</strong></div>
                    <div class="row" style="font-size: 0.8rem; color: #6b7280;">(A pagar al volver de las vacaciones)</div>
                </div>

                <div id="vacWarning" class="warning-note" style="display:none; color: #d97706;">
                    ‚ö†Ô∏è El monto es insuficiente para los d√≠as pedidos (Regla: 30%=3d, 40%=5d, 50%=7d).
                </div>
            </div>
        </div>

        <div class="card" id="cardCuotas">
            <div class="card-header"><i class="fas fa-handshake"></i> E. Plan de Pagos</div>
            <div class="card-body">
                <p class="status-text">Disponible: Soft+ (D√≠a 16+). <br><small>Excepcional: D√≠a 8. Supervisor: D√≠a 1.</small></p>
                
                <div class="calc-row">
                    <span>Entrada (<span id="cuotaPorc">100</span>%):</span>
                    <strong class="money" id="cuotaEntrada">‚Ç¨0.00</strong>
                </div>
                <div class="calc-row"><span>Saldo a Financiar:</span> <strong id="cuotaSaldo">‚Ç¨0.00</strong></div>

                <hr>
                <div class="mini-inputs">
                    <label>Frecuencia:</label>
                    <select id="cuotaFreq" onchange="calcularCuotas()">
                        <option value="15">Quincenal (Cada 15 d√≠as)</option>
                        <option value="30">Mensual (Cada 30 d√≠as)</option>
                    </select>
                </div>
                <div class="mini-inputs">
                    <label>Cant. Cuotas:</label>
                    <input type="number" id="cuotaCant" value="2" min="1" max="6" oninput="calcularCuotas()">
                </div>

                <div id="scheduleTable" class="schedule-list">
                    </div>
                
                <p class="warning-note">Si falla: Deuda vuelve a Total + Cargos. (Min 2x cuerpos Soft+/Hard).</p>
            </div>
        </div>

    </div>
</div>

<script src="script.js"></script>
</body>
</html>